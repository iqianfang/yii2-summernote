const summernoteS3uploader={signEndpoint:"",bucket:"",folder:"",maxFileSize:1024e3,expiration:"",file:"",editor:"",fileSlugify:function(e){var t=/[^\w\s-.]/g,a=/[-\s]+/g;return e=e.replace(t,"").trim().toLowerCase(),e=e.replace(a,"-")},getFolder:function(){return"string"==typeof this.folder?this.folder:this.folder()},sendImage:function(){var e={key:this.getFolder()+this.fileSlugify(this.file.name),"Content-Type":this.file.type,success_action_status:"200","x-amz-storage-class":"REDUCED_REDUNDANCY",acl:"public-read",bucket:this.bucket},t,a=[],n=new FormData;for(var i in e)t={},t[i]=e[i],a.push(t),n.append(i,e[i]);a.push(["content-length-range",0,this.maxFileSize]);var o={},s;o.expiration=this.expiration,o.conditions=a,s=JSON.stringify(o),$.ajax({url:this.signEndpoint,type:"POST",data:s,dataType:"json",contentType:"application/json; charset=UTF-8",processData:!1,success:function(e){e.policy.length>0&&e.signature.length>0&&(n.delete("bucket"),n.append("policy",e.policy),n.append("x-amz-signature",e.signature),n.append("x-amz-date",e.x_amz_date),n.append("x-amz-credential",e.x_amz_credential),n.append("x-amz-algorithm",e.x_amz_algorithm),n.append("file",summernoteS3uploader.file),$.ajax({data:n,dataType:"xml",type:"POST",cache:!1,contentType:!1,processData:!1,url:"http://"+summernoteS3uploader.bucket+".s3.amazonaws.com/",success:function(e,t){if("success"===t){var a="https://"+summernoteS3uploader.bucket+".s3.amazonaws.com/"+summernoteS3uploader.getFolder()+summernoteS3uploader.fileSlugify(summernoteS3uploader.file.name);summernoteS3uploader.editor.summernote("insertImage",a)}}}))}})}};
